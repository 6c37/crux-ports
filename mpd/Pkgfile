# Description: Flexible, powerful, server-side application for playing music.
# URL:         http://www.musicpd.org/
# Packager:    Mark Rosenstand, mark at borkware dot net
# Maintainer:  6c37 Team, https://github.com/6c37/crux-ports/issues
# Depends on:  boost libmad libid3tag libmpdclient glib flac

name=mpd
version=0.19.10
release=2
source=(
	mpd
	http://www.musicpd.org/download/mpd/0.19/$name-$version.tar.xz
)

build() {
	cd $name-$version

	./configure \
		--prefix=/usr \
		--sysconfdir=/etc \
		--enable-inotify \
		--enable-libmpdclient \
		--enable-pipe-output \
		--enable-flac \
		--disable-libwrap \
		--disable-soundcloud \
		--disable-jack \
		--disable-pulse \
		--disable-sidplay \
		--disable-fluidsynth \
		--disable-gme \
		--disable-lame-encoder \
		--disable-openal \
		--disable-oss \
		--disable-shout \
		--disable-sqlite \
		--disable-mms \
		--disable-modplug \
		--disable-shout \
		--disable-neighbor-plugins \
		--disable-wavpack \
		--with-zeroconf=no

	make
	make DESTDIR=$PKG install

	install -Dm644 doc/mpdconf.example $PKG/etc/mpd.conf 
	install -Dm755 ../mpd $PKG/etc/rc.d/mpd

	rm -rf $PKG/usr/share/doc
}
