# Description: A library for reading and writing images, including classes, utilities, and applications.
# URL:         http://openimageio.org/
# Maintainer:  6c37 Team, https://github.com/6c37/crux-ports/issues
# Depends on:  cmake openjpeg giflib openexr boost
# Optional:    qt4 qt5 glew ffmpeg py3boost

name=openimageio
version=1.8.5
release=1
source=(https://github.com/OpenImageIO/oiio/archive/Release-$version.tar.gz)

build() {
	cd oiio-Release-$version

	if [ "$(pkginfo -i | grep '^py3boost ' )" ] ; then
		export PY3FLAGS=' -DUSE_PYTHON3=ON -DPYLIB3_INSTALL_DIR=lib/python3.6/site-packages'
	fi

	mkdir build && cd build
	cmake .. \
		-DCMAKE_BUILD_TYPE=Release \
		-DCMAKE_INSTALL_PREFIX=/usr \
		-DUSE_OPENSSL=ON \
		$PY3FLAGS

	make
	make DESTDIR=$PKG install

	rm -rf $PKG/usr/share
}
