# Description: Extra modules and scripts for CMake.
# URL:         https://projects.kde.org/projects/kdesupport/extra-cmake-modules
# Maintainer:  6c37 team, https://github.com/6c37/crux-ports/issues
# Depends on:  cmake

name=extra-cmake-modules
version=5.42.0
release=2
source=(
	https://download.kde.org/stable/frameworks/${version%.*}/$name-$version.tar.xz
	0001-Make-sure-to-search-for-Qt5-based-qmlplugindump.patch
	0002-FindQtWaylandScanner.cmake-Use-qmake-query-for-HINT.patch
)

build() {
	cd $name-$version

	patch -p1 < $SRC/0001-Make-sure-to-search-for-Qt5-based-qmlplugindump.patch
	patch -p1 < $SRC/0002-FindQtWaylandScanner.cmake-Use-qmake-query-for-HINT.patch

	cmake . \
		-DCMAKE_INSTALL_PREFIX=/usr \
		-DCMAKE_BUILD_TYPE=Release \
		-DBUILD_HTML_DOCS=OFF \
		-DBUILD_QTHELP_DOCS=OFF \
		-DBUILD_TESTING=OFF

	make
	make DESTDIR=$PKG install
}
