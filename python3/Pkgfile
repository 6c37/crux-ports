# Description: Python interpreter, version 3.4 with libressl patch.
# URL:         http://www.python.org/
# Packager:    Kristian Lehmann, email at zero-io dot net
# Maintainer:  onodera, onodera at openmailbox dot org
# Depends on:  sqlite3

name=python3
version=3.4.3
release=1
source=(
	http://python.org/ftp/python/$version/Python-$version.tar.xz \
	python-3.4.3-randegd.diff
)

build() {
	cd Python-$version

	patch -p1 < ../python-3.4.3-randegd.diff 

	./configure --prefix=/usr \
		--mandir=/usr/man \
		--enable-shared \
		--with-threads \
		--with-sqlite \
		--enable-ipv6 \
		--with-tkinter
  
	make
	make DESTDIR=$PKG install
	rm $PKG/usr/bin/2to3

	# remove junk files
	find $PKG -name "README*" -delete
	find $PKG -name "ChangeLog*" -delete
	find $PKG -name "TODO*" -delete
	find $PKG -name "NEWS*" -delete
}
